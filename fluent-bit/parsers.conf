[MULTILINE_PARSER] # Spring Boot multiline parser
  Name          springboot_multiline
  Type          regex
  # Timeout chỉ áp dụng khi KHÔNG có dòng mới nào
  # Nếu gặp timestamp mới, sẽ tự động flush ngay (không cần chờ timeout)
  Flush_Timeout 1000 # 1 second

  # Rule 1: Dòng đầu tiên bắt đầu bằng timestamp → bắt đầu log entry mới
  Rule          "start_state"   "/^\d{4}-\d{2}-\d{2}/"  "cont"
  
  # Rule 2: Đang ở cont, gặp dòng KHÔNG phải timestamp → tiếp tục gộp
  # Lưu ý: Khi ở "cont" mà gặp dòng MỚI bắt đầu bằng timestamp, 
  # dòng đó sẽ KHÔNG match rule này → Fluent Bit tự động flush buffer
  # và bắt đầu entry mới (match Rule 1)
  Rule          "cont"          "/^(?!\d{4}-\d{2}-\d{2})/" "cont"

